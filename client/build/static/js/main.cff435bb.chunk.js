(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{66:function(e,t,a){e.exports=a(97)},97:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),l=a.n(c),o=a(57),u=a.n(o),s=a(11),i=a(8),m=a(4),p=a.n(m),d=a(10),f=a(53),E=a.n(f),v=a(20),h=a(54),g=a(55),b=a(60),O=[],y=a(2),N={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null},j={notes:[]},x={edit:!1},w=Object(v.combineReducers)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_ALERT":return[].concat(Object(b.a)(e),[n]);case"REMOVE_ALERT":return e.filter((function(e){return e.id!==n}));default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"USER_LOADED":return Object(y.a)(Object(y.a)({},e),{},{isAuthenticated:!0,loading:!1,user:n});case"REGISTER_SUCCESS":case"LOGIN_SUCCESS":return Object(y.a)(Object(y.a)(Object(y.a)({},e),n),{},{isAuthenticated:!0,loading:!1});case"AUTH_ERROR":case"LOGOUT":return Object(y.a)(Object(y.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1,user:null});default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"ADD_NOTE":case"REMOVE_NOTE":case"MODIFY_NOTE":case"GET_NOTES":return Object(y.a)(Object(y.a)({},e),{},{notes:n});default:return e}},edit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"TOGGLE_EDIT":return Object(y.a)(Object(y.a)({},e),{},{edit:n});default:return e}}}),k=function(e){e?(R.defaults.headers.common["x-auth-token"]=e,localStorage.setItem("token",e)):(delete R.defaults.headers.common["x-auth-token"],localStorage.removeItem("token"))},S=[g.a],T=Object(v.createStore)(w,{},Object(h.composeWithDevTools)(v.applyMiddleware.apply(void 0,S))),A=T.getState();T.subscribe((function(){var e=A;if(A=T.getState(),e.auth.token!==A.auth.token){var t=A.auth.token;k(t)}}));var C=T,_=E.a.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});_.interceptors.response.use((function(e){return e}),(function(e){return"Token is not valid"===e.response.data.msg&&C.dispatch({type:"LOGOUT"}),Promise.reject(e)}));var R=_,L=a(56),D=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return function(n){var r=Object(L.v4)();n({type:"SET_ALERT",payload:{msg:e,alertType:t,id:r}}),setTimeout((function(){return n({type:"REMOVE_ALERT",payload:r})}),a)}},I=function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.get("/auth");case 3:a=e.sent,t({type:"USER_LOADED",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:"AUTH_ERROR"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},G=Object(i.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{logout:function(){return{type:"LOGOUT"}}})((function(e){var t=e.isAuthenticated,a=e.logout,c=r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"nav-link"},r.a.createElement(s.b,{to:"/"},"Home")),r.a.createElement("li",{className:"nav-link"},r.a.createElement(s.b,{to:"/login"},"Login")),r.a.createElement("li",{className:"nav-link"},r.a.createElement(s.b,{to:"/register"},"Register"))),l=r.a.createElement("li",{className:"nav-link"},r.a.createElement(s.b,{to:"/login",onClick:a},"Log Out"));return r.a.createElement("header",{className:"clearfix"},r.a.createElement("h1",null,r.a.createElement(u.a,null),"Keeper"),r.a.createElement("ul",{className:"nav-list ml-auto"},t?l:c))})),U=function(){var e=(new Date).getFullYear();return r.a.createElement("footer",null,r.a.createElement("p",null,"Copyright \u24d2 ",e))},F=a(6),M=Object(i.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}))((function(e){return e.isAuthenticated?r.a.createElement(F.a,{to:"/dashboard"}):r.a.createElement("section",{className:"landing"},r.a.createElement("div",{className:"dark-overlay"},r.a.createElement("div",{className:"landing-inner"},r.a.createElement("h1",{className:"x-large"},"Keeper"),r.a.createElement("p",{className:"lead"},"A place to Keep."),r.a.createElement("div",{className:"buttons"},r.a.createElement(s.b,{to:"/register",className:"btn btn-primary"},"Sign Up"),r.a.createElement(s.b,{to:"/login",className:"btn btn-light"},"Login")))))})),P=a(17),Y=Object(i.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(){var a=Object(d.a)(p.a.mark((function a(n){var r,c,l;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r={email:e,password:t},a.prev=1,a.next=4,R.post("/auth",r);case 4:c=a.sent,n({type:"LOGIN_SUCCESS",payload:c.data}),n(I()),a.next=14;break;case 9:a.prev=9,a.t0=a.catch(1),(l=a.t0.response.data.errors)&&l.forEach((function(e){return n(D(e.msg,"danger"))})),n({type:"LOGIN_FAIL"});case 14:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.login,a=e.isAuthenticated,c=Object(n.useState)({email:"",password:""}),l=Object(P.a)(c,2),o=l[0],u=l[1],i=o.email,m=o.password,p=function(e){return u(Object(y.a)(Object(y.a)({},o),{},{[e.target.name]:e.target.value}))};return a?r.a.createElement(F.a,{to:"/dashboard"}):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"form-wrapper"},r.a.createElement("h1",{className:"large text-primary"},"Sign In"),r.a.createElement("p",{className:"lead"},r.a.createElement("i",{className:"fas fa-user"})," Sign Into Your Account"),r.a.createElement("form",{className:"form",onSubmit:function(e){e.preventDefault(),t(i,m)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",placeholder:"Email Address",name:"email",value:i,onChange:p,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",value:m,onChange:p,minLength:"6"})),r.a.createElement("input",{type:"submit",className:"btn btn-primary center",value:"Login"})),r.a.createElement("p",{className:"my-1"},"Don't have an account? ",r.a.createElement(s.b,{to:"/register"},"Sign Up"))))})),V=Object(i.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{setAlert:D,register:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.post("/users",e);case 3:n=t.sent,a({type:"REGISTER_SUCCESS",payload:n.data}),a(I()),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),(r=t.t0.response.data.errors)&&r.forEach((function(e){return a(D(e.msg,"danger"))})),a({type:"REGISTER_FAIL"});case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.setAlert,a=e.register,c=e.isAuthenticated,l=Object(n.useState)({name:"",email:"",password:"",password2:""}),o=Object(P.a)(l,2),u=o[0],i=o[1],m=u.name,f=u.email,E=u.password,v=u.password2,h=function(e){return i(Object(y.a)(Object(y.a)({},u),{},{[e.target.name]:e.target.value}))},g=function(){var e=Object(d.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),E!==v?t("Passwords do not match","danger"):a({name:m,email:f,password:E});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c?r.a.createElement(F.a,{to:"/dashboard"}):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"form-wrapper"},r.a.createElement("h1",{className:"large text-primary"},"Sign Up"),r.a.createElement("p",{className:"lead"},r.a.createElement("i",{className:"fas fa-user"})," Create Your Account"),r.a.createElement("form",{className:"form",onSubmit:g},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Name",name:"name",value:m,onChange:h})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",placeholder:"Email Address",name:"email",value:f,onChange:h})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",value:E,onChange:h})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",placeholder:"Confirm Password",name:"password2",value:v,onChange:h})),r.a.createElement("input",{type:"submit",className:"btn btn-primary center",value:"Register"})),r.a.createElement("p",{className:"my-1"},"Already have an account? ",r.a.createElement(s.b,{to:"/login"},"Sign In"))))})),H=a(33),K=a.n(H),J=a(110),q=a(111),B=function(e,t){return function(){var a=Object(d.a)(p.a.mark((function a(n){var r,c,l;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r={title:e,text:t},a.prev=1,a.next=4,R.post("/notes",r);case 4:c=a.sent,n({type:"ADD_NOTE",payload:c.data}),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),(l=a.t0.response.data.errors)&&l.forEach((function(e){return n(D(e.msg,"danger"))}));case 12:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()},W=Object(i.b)((function(e){return{notes:e.notes.notes}}),{addNote:B})((function(e){var t=Object(n.useState)(!1),a=Object(P.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)({title:"",text:""}),u=Object(P.a)(o,2),s=u[0],i=u[1],m=function(e){var t=e.target,a=t.name,n=t.value;i((function(e){return Object(y.a)(Object(y.a)({},e),{},{[a]:n})}))};return r.a.createElement("div",null,r.a.createElement("form",{className:"create-note"},c&&r.a.createElement("input",{name:"title",onChange:m,value:s.title,placeholder:"Title"}),r.a.createElement("textarea",{name:"text",onClick:function(){l(!0)},onChange:m,value:s.text,placeholder:"Take a note...",rows:c?3:1}),r.a.createElement(q.a,{in:c},r.a.createElement(J.a,{onClick:function(t){e.addNote(s.title,s.text),i({title:"",text:""}),t.preventDefault()}},r.a.createElement(K.a,null)))))})),z=a(58),Q=a.n(z),X=a(59),Z=a.n(X),$=Object(i.b)((function(e){return{notes:e.notes.notes}}),{addNote:B,removeNote:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.delete("/notes/".concat(e));case 3:n=t.sent,a({type:"REMOVE_NOTE",payload:n.data}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),(r=t.t0.response.data.errors)&&r.forEach((function(e){return a(D(e.msg,"danger"))}));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},modifyNote:function(e,t,a){return function(){var n=Object(d.a)(p.a.mark((function n(r){var c,l,o;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={title:e,text:t},n.prev=1,n.next=4,R.patch("/notes/".concat(a),c);case 4:l=n.sent,r({type:"MODIFY_NOTE",payload:l.data}),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),(o=n.t0.response.data.errors)&&o.forEach((function(e){return r(D(e.msg,"danger"))}));case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()},getNotes:function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.get("/notes");case 3:a=e.sent,t({type:"GET_NOTES",payload:a.data}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),(n=e.t0.response.data.errors)&&n.forEach((function(e){return t(D(e.msg,"danger"))}));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},toggleEdit:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"TOGGLE_EDIT",payload:!e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.removeNote,a=e.getNotes,c=e.modifyNote,l=e.notes,o=e.toggleEdit;Object(n.useEffect)((function(){k(localStorage.token),function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[a]);var u=Object(n.useState)(!1),s=Object(P.a)(u,2),i=s[0],m=s[1],f=Object(n.useState)({title:"",text:""}),E=Object(P.a)(f,2),v=E[0],h=E[1],g=Object(n.useState)(""),b=Object(P.a)(g,2),O=b[0],N=b[1],j=function(e){var t=e.target,a=t.name,n=t.value;h((function(e){return Object(y.a)(Object(y.a)({},e),{},{[a]:n})}))},x=function(e){t(e.currentTarget.parentNode.getAttribute("data-key"))},w=function(e){m(!0),o(i);var t=e.currentTarget.parentNode.getAttribute("data-key");N(t);var a=l.find((function(e){return e._id===t})),n=a.title,r=a.text;h({title:n,text:r}),e.preventDefault()};if(l)var S=l.map((function(e){return r.a.createElement("div",{className:"note","data-key":e._id,key:e._id},r.a.createElement("h1",null,e.title),r.a.createElement("p",null,e.text),r.a.createElement("button",{onClick:x},r.a.createElement(Q.a,null)),!i&&r.a.createElement("button",{onClick:w},r.a.createElement(Z.a,null)))}));return r.a.createElement(n.Fragment,null,i&&r.a.createElement("div",{className:"edit-note"},r.a.createElement("form",{className:"create-note "},r.a.createElement("input",{name:"title",onChange:j,value:v.title,placeholder:"Title",rows:1}),r.a.createElement("textarea",{name:"text",onChange:j,value:v.text,placeholder:"Take a note...",rows:3}),r.a.createElement(q.a,{in:!0},r.a.createElement(J.a,{onClick:function(e){m(!1),o(i);var t=O;c(v.title,v.text,t),h({title:"",text:""}),e.preventDefault()}},r.a.createElement(K.a,null))))),S)})),ee=Object(i.b)((function(e){return{edit:e.edit.edit}}),null)((function(e){var t=e.edit;return r.a.createElement("div",null,!t&&r.a.createElement(W,null),r.a.createElement($,null))})),te=Object(i.b)((function(e){return{alerts:e.alert}}))((function(e){var t=e.alerts;return null!==t&&t.length>0&&t.map((function(e){return r.a.createElement("div",{key:e.id,className:"alert alert-".concat(e.alertType)},e.msg)}))})),ae=function(){return Object(n.useEffect)((function(){k(localStorage.token),C.dispatch(I())}),[]),r.a.createElement(i.a,{store:C},r.a.createElement(s.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(G,null),r.a.createElement(te,null),r.a.createElement(F.d,null,r.a.createElement(F.b,{exact:!0,path:"/",component:M}),r.a.createElement(F.b,{exact:!0,path:"/register",component:V}),r.a.createElement(F.b,{exact:!0,path:"/login",component:Y}),r.a.createElement(F.b,{exact:!0,path:"/dashboard",component:ee})),r.a.createElement(U,null))))};l.a.render(r.a.createElement(ae,null),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.cff435bb.chunk.js.map