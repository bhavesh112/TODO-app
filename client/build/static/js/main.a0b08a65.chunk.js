(this["webpackJsonpusing-pre-built-react-components-completed"]=this["webpackJsonpusing-pre-built-react-components-completed"]||[]).push([[0],{66:function(e,t,a){e.exports=a(97)},97:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),l=a.n(c),o=a(57),u=a.n(o),s=a(10),i=a(9),m=a(5),p=a.n(m),d=a(12),f=a(53),E=a.n(f),v=a(20),h=a(54),g=a(55),b=a(60),O=[],y=a(3),N={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null},j={notes:[]},x=Object(v.combineReducers)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_ALERT":return[].concat(Object(b.a)(e),[n]);case"REMOVE_ALERT":return e.filter((function(e){return e.id!==n}));default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"USER_LOADED":return Object(y.a)(Object(y.a)({},e),{},{isAuthenticated:!0,loading:!1,user:n});case"REGISTER_SUCCESS":case"LOGIN_SUCCESS":return Object(y.a)(Object(y.a)(Object(y.a)({},e),n),{},{isAuthenticated:!0,loading:!1});case"AUTH_ERROR":case"LOGOUT":return Object(y.a)(Object(y.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1,user:null});default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"ADD_NOTE":case"REMOVE_NOTE":case"MODIFY_NOTE":case"GET_NOTES":return Object(y.a)(Object(y.a)({},e),{},{notes:n});default:return e}}}),k=function(e){e?(R.defaults.headers.common["x-auth-token"]=e,localStorage.setItem("token",e)):(delete R.defaults.headers.common["x-auth-token"],localStorage.removeItem("token"))},w=[g.a],S=Object(v.createStore)(x,{},Object(h.composeWithDevTools)(v.applyMiddleware.apply(void 0,w))),A=S.getState();S.subscribe((function(){var e=A;if(A=S.getState(),e.auth.token!==A.auth.token){var t=A.auth.token;k(t)}}));var T=S,C=E.a.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});C.interceptors.response.use((function(e){return e}),(function(e){return"Token is not valid"===e.response.data.msg&&T.dispatch({type:"LOGOUT"}),Promise.reject(e)}));var R=C,_=a(56),L=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return function(n){var r=Object(_.v4)();n({type:"SET_ALERT",payload:{msg:e,alertType:t,id:r}}),setTimeout((function(){return n({type:"REMOVE_ALERT",payload:r})}),a)}},D=function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.get("/auth");case 3:a=e.sent,t({type:"USER_LOADED",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:"AUTH_ERROR"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},I=Object(i.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{logout:function(){return{type:"LOGOUT"}}})((function(e){var t=e.isAuthenticated,a=e.logout,c=r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"nav-link"},r.a.createElement(s.b,{to:"/"},"Home")),r.a.createElement("li",{className:"nav-link"},r.a.createElement(s.b,{to:"/login"},"Login")),r.a.createElement("li",{className:"nav-link"},r.a.createElement(s.b,{to:"/register"},"Register"))),l=r.a.createElement("li",{className:"nav-link"},r.a.createElement(s.b,{to:"/login",onClick:a},"Log Out"));return r.a.createElement("header",{className:"clearfix"},r.a.createElement("h1",null,r.a.createElement(u.a,null),"Keeper"),r.a.createElement("ul",{className:"nav-list ml-auto"},t?l:c))})),U=function(){var e=(new Date).getFullYear();return r.a.createElement("footer",null,r.a.createElement("p",null,"Copyright \u24d2 ",e))},G=a(6),F=Object(i.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}))((function(e){return e.isAuthenticated?r.a.createElement(G.a,{to:"/dashboard"}):r.a.createElement("section",{className:"landing"},r.a.createElement("div",{className:"dark-overlay"},r.a.createElement("div",{className:"landing-inner"},r.a.createElement("h1",{className:"x-large"},"Keeper"),r.a.createElement("p",{className:"lead"},"A place to Keep."),r.a.createElement("div",{className:"buttons"},r.a.createElement(s.b,{to:"/register",className:"btn btn-primary"},"Sign Up"),r.a.createElement(s.b,{to:"/login",className:"btn btn-light"},"Login")))))})),M=a(17),P=Object(i.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(){var a=Object(d.a)(p.a.mark((function a(n){var r,c,l;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r={email:e,password:t},a.prev=1,a.next=4,R.post("/auth",r);case 4:c=a.sent,n({type:"LOGIN_SUCCESS",payload:c.data}),n(D()),a.next=14;break;case 9:a.prev=9,a.t0=a.catch(1),(l=a.t0.response.data.errors)&&l.forEach((function(e){return n(L(e.msg,"danger"))})),n({type:"LOGIN_FAIL"});case 14:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.login,a=e.isAuthenticated,c=Object(n.useState)({email:"",password:""}),l=Object(M.a)(c,2),o=l[0],u=l[1],i=o.email,m=o.password,p=function(e){return u(Object(y.a)(Object(y.a)({},o),{},{[e.target.name]:e.target.value}))};return a?r.a.createElement(G.a,{to:"/dashboard"}):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"form-wrapper"},r.a.createElement("h1",{className:"large text-primary"},"Sign In"),r.a.createElement("p",{className:"lead"},r.a.createElement("i",{className:"fas fa-user"})," Sign Into Your Account"),r.a.createElement("form",{className:"form",onSubmit:function(e){e.preventDefault(),t(i,m)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",placeholder:"Email Address",name:"email",value:i,onChange:p,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",value:m,onChange:p,minLength:"6"})),r.a.createElement("input",{type:"submit",className:"btn btn-primary center",value:"Login"})),r.a.createElement("p",{className:"my-1"},"Don't have an account? ",r.a.createElement(s.b,{to:"/register"},"Sign Up"))))})),Y=Object(i.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{setAlert:L,register:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.post("/users",e);case 3:n=t.sent,a({type:"REGISTER_SUCCESS",payload:n.data}),a(D()),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),(r=t.t0.response.data.errors)&&r.forEach((function(e){return a(L(e.msg,"danger"))})),a({type:"REGISTER_FAIL"});case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.setAlert,a=e.register,c=e.isAuthenticated,l=Object(n.useState)({name:"",email:"",password:"",password2:""}),o=Object(M.a)(l,2),u=o[0],i=o[1],m=u.name,f=u.email,E=u.password,v=u.password2,h=function(e){return i(Object(y.a)(Object(y.a)({},u),{},{[e.target.name]:e.target.value}))},g=function(){var e=Object(d.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),E!==v?t("Passwords do not match","danger"):a({name:m,email:f,password:E});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c?r.a.createElement(G.a,{to:"/dashboard"}):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"form-wrapper"},r.a.createElement("h1",{className:"large text-primary"},"Sign Up"),r.a.createElement("p",{className:"lead"},r.a.createElement("i",{className:"fas fa-user"})," Create Your Account"),r.a.createElement("form",{className:"form",onSubmit:g},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Name",name:"name",value:m,onChange:h})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",placeholder:"Email Address",name:"email",value:f,onChange:h})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",value:E,onChange:h})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",placeholder:"Confirm Password",name:"password2",value:v,onChange:h})),r.a.createElement("input",{type:"submit",className:"btn btn-primary center",value:"Register"})),r.a.createElement("p",{className:"my-1"},"Already have an account? ",r.a.createElement(s.b,{to:"/login"},"Sign In"))))})),V=a(33),H=a.n(V),K=a(110),J=a(111),q=function(e,t){return function(){var a=Object(d.a)(p.a.mark((function a(n){var r,c,l;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r={title:e,text:t},a.prev=1,a.next=4,R.post("/notes",r);case 4:c=a.sent,n({type:"ADD_NOTE",payload:c.data}),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),(l=a.t0.response.data.errors)&&l.forEach((function(e){return n(L(e.msg,"danger"))}));case 12:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()},B=Object(i.b)((function(e){return{notes:e.notes.notes}}),{addNote:q})((function(e){var t=Object(n.useState)(!1),a=Object(M.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)({title:"",text:""}),u=Object(M.a)(o,2),s=u[0],i=u[1],m=function(e){var t=e.target,a=t.name,n=t.value;i((function(e){return Object(y.a)(Object(y.a)({},e),{},{[a]:n})}))};return r.a.createElement("div",null,r.a.createElement("form",{className:"create-note"},c&&r.a.createElement("input",{name:"title",onChange:m,value:s.title,placeholder:"Title"}),r.a.createElement("textarea",{name:"text",onClick:function(){l(!0)},onChange:m,value:s.text,placeholder:"Take a note...",rows:c?3:1}),r.a.createElement(J.a,{in:c},r.a.createElement(K.a,{onClick:function(t){e.addNote(s.title,s.text),i({title:"",text:""}),t.preventDefault()}},r.a.createElement(H.a,null)))))})),W=a(58),z=a.n(W),Q=a(59),X=a.n(Q),Z=Object(i.b)((function(e){return{notes:e.notes.notes}}),{addNote:q,removeNote:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.delete("/notes/".concat(e));case 3:n=t.sent,a({type:"REMOVE_NOTE",payload:n.data}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),(r=t.t0.response.data.errors)&&r.forEach((function(e){return a(L(e.msg,"danger"))}));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},modifyNote:function(e,t,a){return function(){var n=Object(d.a)(p.a.mark((function n(r){var c,l,o;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={title:e,text:t},n.prev=1,n.next=4,R.patch("/notes/".concat(a),c);case 4:l=n.sent,r({type:"MODIFY_NOTE",payload:l.data}),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),(o=n.t0.response.data.errors)&&o.forEach((function(e){return r(L(e.msg,"danger"))}));case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()},getNotes:function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.get("/notes");case 3:a=e.sent,t({type:"GET_NOTES",payload:a.data}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),(n=e.t0.response.data.errors)&&n.forEach((function(e){return t(L(e.msg,"danger"))}));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.removeNote,a=e.getNotes,c=e.modifyNote,l=e.notes;Object(n.useEffect)((function(){k(localStorage.token),function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[a]);var o=Object(n.useState)(!1),u=Object(M.a)(o,2),s=u[0],i=u[1],m=Object(n.useState)({title:"",text:""}),f=Object(M.a)(m,2),E=f[0],v=f[1],h=Object(n.useState)(""),g=Object(M.a)(h,2),b=g[0],O=g[1],N=function(e){var t=e.target,a=t.name,n=t.value;v((function(e){return Object(y.a)(Object(y.a)({},e),{},{[a]:n})}))},j=function(e){t(e.currentTarget.parentNode.getAttribute("data-key"))},x=function(e){i(!0);var t=e.currentTarget.parentNode.getAttribute("data-key");O(t);var a=l.find((function(e){return e._id===t})),n=a.title,r=a.text;v({title:n,text:r}),e.preventDefault()};if(l)var w=l.map((function(e){return r.a.createElement("div",{className:"note","data-key":e._id,key:e._id},r.a.createElement("h1",null,e.title),r.a.createElement("p",null,e.text),r.a.createElement("button",{onClick:j},r.a.createElement(z.a,null)),!s&&r.a.createElement("button",{onClick:x},r.a.createElement(X.a,null)))}));return r.a.createElement(n.Fragment,null,w,s&&r.a.createElement("div",{className:"edit-note"},r.a.createElement("form",{className:"create-note "},r.a.createElement("input",{name:"title",onChange:N,value:E.title,placeholder:"Title",rows:1}),r.a.createElement("textarea",{name:"text",onChange:N,value:E.text,placeholder:"Take a note...",rows:3}),r.a.createElement(J.a,{in:!0},r.a.createElement(K.a,{onClick:function(e){i(!1);var t=b;c(E.title,E.text,t),v({title:"",text:""}),e.preventDefault()}},r.a.createElement(H.a,null))))))})),$=function(){return r.a.createElement("div",null,r.a.createElement(B,null),r.a.createElement(Z,null))},ee=Object(i.b)((function(e){return{alerts:e.alert}}))((function(e){var t=e.alerts;return null!==t&&t.length>0&&t.map((function(e){return r.a.createElement("div",{key:e.id,className:"alert alert-".concat(e.alertType)},e.msg)}))})),te=function(){return Object(n.useEffect)((function(){k(localStorage.token),T.dispatch(D())}),[]),r.a.createElement(i.a,{store:T},r.a.createElement(s.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(I,null),r.a.createElement(ee,null),r.a.createElement(G.d,null,r.a.createElement(G.b,{exact:!0,path:"/",component:F}),r.a.createElement(G.b,{exact:!0,path:"/register",component:Y}),r.a.createElement(G.b,{exact:!0,path:"/login",component:P}),r.a.createElement(G.b,{exact:!0,path:"/dashboard",component:$})),r.a.createElement(U,null))))};l.a.render(r.a.createElement(te,null),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.a0b08a65.chunk.js.map